<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.xms.dao.EmpMapper">
	<!-- 关联映射-嵌套查询 -->
	<select id="findEmpByEmpnoOne" parameterType="integer" resultMap="empMapOne">
		select * from emp where empno=#{empno}
	</select>
	<resultMap type="com.xms.entity.Emp" id="empMapOne">
		<!-- 可以手动加上关联字段的映射 -->
		<result property="deptno" column="deptno"/>
		<association property="dept" column="deptno" javaType="com.xms.entity.Dept"
			select="findByDeptno"/>
	</resultMap>
	<select id="findByDeptno" parameterType="integer" resultType="com.xms.entity.Dept">
		select * from dept where deptno=#{deptno}
	</select>
	<!-- 关联映射-嵌套结果查询 -->
	<select id="findEmpByEmpnoTwo" parameterType="integer" resultMap="empMapTwo">
		select e.*,d.* from emp e inner join dept d on e.deptno=d.deptno where e.empno=#{empno}
	</select>
	<resultMap type="com.xms.entity.Emp" id="empMapTwo">
		<id property="empno" column="empno"/>
		<result property="ename" column="ename"/>
		<result property="salary" column="salary"/>
		<result property="bonus" column="bonus"/>
		<result property="hiredate" column="hiredate"/>
		<result property="deptno" column="deptno"/>
		<association property="dept" column="deptno" javaType="com.xms.entity.Dept">
			<id property="deptno" column="deptno"/>
			<result property="dname" column="dname"/>
			<result property="address" column="address"/>
		</association>
		
	</resultMap>
	
</mapper>
	
	
	
 
 
 
 
 
 
 
 
 
 
 