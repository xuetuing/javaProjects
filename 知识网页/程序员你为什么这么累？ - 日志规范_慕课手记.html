<!DOCTYPE html>
<!-- saved from url=(0035)https://www.imooc.com/article/28121 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>
程序员你为什么这么累？ - 日志规范_慕课手记
</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="renderer" content="webkit">
<meta name="mobile-agent" content="format=wml" ;="" url="https://m.imooc.com/article/28121">
<link rel="alternate" media="only screen and (max-width: 640px)" href="https://m.imooc.com/article/28121">
<meta name="mobile-agent" content="format=xhtml" ;="" url="https://m.imooc.com/article/28121">
<meta name="mobile-agent" content="format=html5" ;="" url="https://m.imooc.com/article/28121">
<meta property="qc:admins" content="77103107776157736375">
<meta property="wb:webmaster" content="c4f857219bfae3cb">
<meta http-equiv="Access-Control-Allow-Origin" content="*">
<meta http-equiv="Cache-Control" content="no-transform ">
<meta http-equiv="Cache-Control" content="no-siteapp">
<link rel="dns-prefetch" href="https://www.imooc.com/">
<link rel="dns-prefetch" href="https://img.imooc.com/">
<link rel="dns-prefetch" href="https://img.mukewang.com/">
<link rel="apple-touch-icon" sizes="76x76" href="https://www.imooc.com/static/img/common/touch-icon-ipad.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://www.imooc.com/static/img/common/touch-icon-iphone-retina.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://www.imooc.com/static/img/common/touch-icon-ipad-retina.png">



<meta name="Description" content="导读：程序员你为什么这么累？ 接口定义规范 controller规范 日志规范 异常处理规范 国际化和参数校验规范 工具类规范 函数编写建议 配置建议 开发中日志这个问题，每个公司">









<link rel="stylesheet" href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/moco.min.css" type="text/css">
    <link rel="stylesheet" href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/swiper-3.4.2.min.css">

<script src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/push.js.下载"></script><script type="text/javascript" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/rt.js.下载"></script><script src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/hm.js.下载"></script><script type="text/javascript">

eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1;};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p;}('!4(){3 a={};3 c=0;3 5=[{d:\'//o.q.g/o/p/K/J.r\',6:0},{d:\'//p.q.g/I/L-O.r\',6:0}];3 w=4(){3 j,s=e N("(^| )"+"k=([^;]*)(;|$)");8(j=u.l.M(s)){m H(j[2])}E{m z}};3 y=4(t){3 n=w();3 b=e F();b.G(b.D()+13*v*v*10);u.l="k="+t+";14="+b.R()+";S=/;P=Q.g";8(t&&t!=n){X.U.V()}};3 C=4(i){3 7=e W();7.T=4(){12(a[i]);a[i]=z;9(i,0)};7.Z=4(){9(i,1)};a[i]=11(4(){7.B="";9(i,1)},Y);7.B=5[i].d};3 9=4(x,6){c++;5[x].6=6;8(c==5.f){3 h=0;A(3 i=0;i<5.f;i++){8(5[i].6==1){h=1}}y(h)}};A(3 i=0;i<5.f;i++){C(i)}}()',62,67,'|||var|function|urls|flag|imgobj|if|callback|timer|exp|count|url|new|length|com|error||arr|IMCDNS|cookie|return|_0|static|img|mukewang|png|reg||document|60|getcookie|index|setcookie|null|for|src|checkCdn|getTime|else|Date|setTime|unescape|images|logo|common|unknow|match|RegExp|80|domain|imooc|toGMTString|path|onload|location|reload|Image|window|3000|onerror|1000|setTimeout|clearTimeout|24|expires'.split('|'),0,{}))

</script>


<script type="text/javascript">

var OP_CONFIG={"module":"article","page":"details","userInfo":{"uid":"6744283","nickname":"\u6155\u59d01507336","head":"\/\/img.mukewang.com\/user\/5333a2b70001a5a802000200-80-80.jpg","usertype":"1","roleid":0}};
var isLogin = 1;
var is_choice = "";
var seajsTimestamp="v=201810251020";
var _msg_unread = 0; 
var _not_unread = 0; 
var _cart_num = 0;
</script>






<link href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/captcha.min.css" rel="stylesheet">
<script>
var isLogin=1
var _hmt = _hmt || [];
var pageInfo = {
	canForward:"1",
    id: "28121",
    praiseNum:"7"
}
var dtid = "7993";
var marking = "be";
var user = {
    uid : "6744283"
}
var authorUid = {
    uid : '2674286'
}
var curPage = 'details'

var a_id = 28121

// 为html转码，article_content 为新markdown编辑器接收的初始化内容
var article_content = "&lt;p&gt;&lt;strong&gt;导读：&lt;a href=&quot;http://www.imooc.com/article/27569&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;程序员你为什么这么累？&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;a href=&quot;https://www.imooc.com/article/27664&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;接口定义规范&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://www.imooc.com/article/27765&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;controller规范&lt;/a&gt; &lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;日志规范&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;异常处理规范 &lt;/li&gt;\n&lt;li&gt;国际化和参数校验规范 &lt;/li&gt;\n&lt;li&gt;工具类规范 &lt;/li&gt;\n&lt;li&gt;函数编写建议&lt;/li&gt;\n&lt;li&gt;配置建议&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;开发中日志这个问题，每个公司都强调，也制定了一大堆规范，但根据实际情况看，效果不是很明显，主要是这个东西不好测试和考核，没有日志功能一样跑啊。&lt;/p&gt;\n&lt;p&gt;但编程活久见，开发久了，总会遇到“这个问题生产环境上能重现，但是没有日志，业务很复杂，不知道哪一步出错了？” 这个时候，怎么办？ 还能怎么办，发个版本，就是把所有地方加上日志，没有任何新功能，然后在让用户重现一遍，拿下日志来看，哦，原来是这个问题。&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;有没有很熟悉的感觉？&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;还有一种情况，我们系统有3*5=15个节点，出了问题找日志真是痛苦，一个一个机器翻，N分钟后终于找到了，找到了后发现好多相似日志，一个一个排查；日志有了，发现逻辑很复杂，不知道走到那个分支，只能根据逻辑分析，半天过去了，终于找到了原因。。。一个问题定位就过去了2个小时，变更时间过去了一半。。。&lt;/p&gt;\n&lt;strong style=&quot;display:block;font-size:22px;margin:22px 0 10px&quot;&gt;日志要求&lt;/strong&gt;\n&lt;p&gt;所以我对日志的最少有以下2点要求：&lt;/p&gt;\n&lt;p&gt;1 能找到那个机器&lt;/p&gt;\n&lt;p&gt;2 能找到用户做了什么&lt;/p&gt;\n&lt;strong style=&quot;display:block;font-size:22px;margin:22px 0 10px&quot;&gt;配置nginx&lt;/strong&gt;\n&lt;p&gt;针对第一点，我修改了一下nginx的配置文件，让返回头里面返回是那个机器处理的。&lt;/p&gt;\n&lt;p&gt;nginx的基本配置，大家查阅一下资料就知道。简单配置如下（生产环境比这个完善）&lt;/p&gt;\n&lt;p&gt;&lt;img title=程序员你为什么这么累？-日志规范_ 图片1 src=&quot;//img.mukewang.com/5ae7c12b0001059e04160325.jpg&quot; alt=&quot;nginx配置&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;效果如图，返回了处理的节点：&lt;/p&gt;\n&lt;p&gt;&lt;img title=程序员你为什么这么累？-日志规范_ 图片2 src=&quot;//img.mukewang.com/5ae7c154000120fe04690263.jpg&quot; alt=&quot;效果图&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;第二点，要知道用户做了什么。用户信息是很重要的一个信息，能帮助海量日志里面能快速找到目标日志。一开始要求开发人员打印的时候带上用户，但是发现这个落地不容易，开发人员打印日志都经常忘记，更加不用说日志上加上用户信息，我也不可能天天看代码。所以找了一下log4j的配置，果然log4j有个叫MDC(Mapped Diagnostic Context)的类（技术上使用了ThreadLocal实现，重点技术）。具体使用方法请自行查询。具体使用如下：&lt;/p&gt;\n&lt;strong style=&quot;display:block;font-size:22px;margin:22px 0 10px&quot;&gt;UserFilter&lt;/strong&gt;\n&lt;p&gt;filter中得到用户信息，并放入MDC，记住filter后要清理掉（因为tomcat线程池线程重用的原因）。&lt;/p&gt;\n&lt;pre class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;/**\n * 用户信息相关的filter\n * \n * @author 晓风轻 https://xwjie.github.io/PLMCodeTemplate/\n *\n */\npublic class UserFilter implements Filter {\n\n  @Override\n  public void init(FilterConfig filterConfig) throws ServletException {\n\n  }\n\n  @Override\n  public void doFilter(ServletRequest request, ServletResponse response,\n      FilterChain chain) throws IOException, ServletException {\n\n    // 得到用户个人相关的信息（登陆的用户，用户的语言）\n    fillUserInfo((HttpServletRequest) request);\n\n    try {\n      chain.doFilter(request, response);\n    } finally {\n      // 由于tomcat线程重用，记得清空\n      clearAllUserInfo();\n    }\n  }\n\n  private void clearAllUserInfo() {\n    UserUtil.clearAllUserInfo();\n  }\n\n  private void fillUserInfo(HttpServletRequest request) {\n    // 用户信息\n    String user = getUserFromSession(request);\n\n    if (user != null) {\n      UserUtil.setUser(user);\n    }\n\n    // 语言信息\n    String locale = getLocaleFromCookies(request);\n\n    // 放入到threadlocal，同一个线程任何地方都可以拿出来\n    if (locale != null) {\n      UserUtil.setLocale(locale);\n    }\n  }\n\n  private String getLocaleFromCookies(HttpServletRequest request) {\n    Cookie[] cookies = request.getCookies();\n\n    if (cookies == null) {\n      return null;\n    }\n\n    for (int i = 0; i &amp;lt; cookies.length; i++) {\n      if (UserUtil.KEY_LANG.equals(cookies[i].getName())) {\n        return cookies[i].getValue();\n      }\n    }\n\n    return null;\n  }\n\n  private String getUserFromSession(HttpServletRequest request) {\n    HttpSession session = request.getSession(false);\n\n    if (session == null) {\n      return null;\n    }\n\n    // 从session中获取用户信息放到工具类中\n    return (String) session.getAttribute(UserUtil.KEY_USER);\n  }\n\n  @Override\n  public void destroy() {\n\n  }\n\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;strong style=&quot;display:block;font-size:22px;margin:22px 0 10px&quot;&gt;用户工具类&lt;/strong&gt;\n&lt;p&gt;用户信息放入MDC：&lt;/p&gt;\n&lt;pre class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;/**\n * 用户工具类\n * \n * @author 晓风轻 https://xwjie.github.io/PLMCodeTemplate/\n *\n */\npublic class UserUtil {\n\n  private final static ThreadLocal&amp;lt;String&amp;gt; tlUser = new ThreadLocal&amp;lt;String&amp;gt;();\n\n  private final static ThreadLocal&amp;lt;Locale&amp;gt; tlLocale = new ThreadLocal&amp;lt;Locale&amp;gt;() {\n    protected Locale initialValue() {\n      // 语言的默认值\n      return Locale.CHINESE;\n    };\n  };\n\n  public static final String KEY_LANG = &quot;lang&quot;;\n\n  public static final String KEY_USER = &quot;user&quot;;\n\n  public static void setUser(String userid) {\n    tlUser.set(userid);\n\n    // 把用户信息放到log4j\n    MDC.put(KEY_USER, userid);\n  }\n\n  /**\n   * 如果没有登录，返回null\n   * \n   * @return\n   */\n  public static String getUserIfLogin() {\n    return tlUser.get();\n  }\n\n  /**\n   * 如果没有登录会抛出异常\n   * \n   * @return\n   */\n  public static String getUser() {\n    String user = tlUser.get();\n\n    if (user == null) {\n      throw new UnloginException();\n    }\n\n    return user;\n  }\n\n  public static void setLocale(String locale) {\n    setLocale(new Locale(locale));\n  }\n\n  public static void setLocale(Locale locale) {\n    tlLocale.set(locale);\n  }\n\n  public static Locale getLocale() {\n    return tlLocale.get();\n  }\n\n  public static void clearAllUserInfo() {\n    tlUser.remove();\n    tlLocale.remove();\n\n    MDC.remove(KEY_USER);\n  }\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;strong style=&quot;display:block;font-size:22px;margin:22px 0 10px&quot;&gt;log4j配置&lt;/strong&gt;\n&lt;p&gt;增加用户信息变量，%X{user}&lt;/p&gt;\n&lt;pre class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;!-- Appenders --&amp;gt;\n&amp;lt;appender name=&quot;console&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&amp;gt;\n  &amp;lt;param name=&quot;Target&quot; value=&quot;System.out&quot; /&amp;gt;\n  &amp;lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&amp;gt;\n    &amp;lt;param name=&quot;ConversionPattern&quot;\n      value=&quot;[%t]%-d{MM-dd HH:mm:ss,SSS} %-5p:%X{user} - %c - %m%n&quot; /&amp;gt;\n  &amp;lt;/layout&amp;gt;\n&amp;lt;/appender&amp;gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;strong style=&quot;display:block;font-size:22px;margin:22px 0 10px&quot;&gt;日志要求&lt;/strong&gt;\n&lt;p&gt;我做好上面2步后，对开发人员的日志只有3点要求：&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;修改（包括新增）操作必须打印日志&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;大部分问题都是修改导致的。数据修改必须有据可查。&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;条件分支必须打印条件值，重要参数必须打印&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;尤其是分支条件的参数，打印后就不用分析和猜测走那个分支了，很重要！如下面代码里面的userType，一定要打印值，因为他&lt;strong&gt;决定了代码走那个分支&lt;/strong&gt;。&lt;/p&gt;\n&lt;p&gt;&lt;img title=程序员你为什么这么累？-日志规范_ 图片3 src=&quot;//img.mukewang.com/5ae7c1770001f31407000463.jpg&quot; alt=&quot;log&quot; /&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;数据量大的时候需要打印数据量&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;前后打印日志和最后的数据量，主要用于分析性能，能从日志中知道查询了多少数据用了多久。这点是建议。自己视情况而决定是否打印，我一般建议打印。&lt;/p&gt;\n&lt;strong style=&quot;display:block;font-size:22px;margin:22px 0 10px&quot;&gt;日志效果图&lt;/strong&gt;\n&lt;p&gt;加上 我的编码习惯 - Controller规范 这篇文章的AOP，最后的日志如下：&lt;/p&gt;\n&lt;p&gt;&lt;img title=程序员你为什么这么累？-日志规范_ 图片4 src=&quot;//img.mukewang.com/5ae7c1a80001d61d07200115.jpg&quot; alt=&quot;log&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;其实日志的级别我到不是很关注，还没有到关注这步到时候。开发组长需要做好后勤工作（前面2步），然后制定简单规则，规则太多太能落实了。&lt;/p&gt;\n&lt;strong style=&quot;display:block;font-size:22px;margin:22px 0 10px&quot;&gt;新手建议&lt;/strong&gt;\n&lt;p&gt;日志这个东西，更多是靠自觉，项目组这么多人，我也不可能一个一个给大家看代码，然后叫你加日志。我分析了一下，为什么有些人没有打印日志的习惯，说了多次都改不过来。我建议大家养成下面的习惯，这样你的日志就会改善多了！&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;不要依赖debug，多依赖日志。&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;别人面对对象编程，你面对debug编程。有些人无论什么语言，最后都变成了面对debug编程。哈哈。这个习惯非常非常不好！debug会让你写代码的时候偷懒不打日志，而且很浪费时间。改掉这个恶习。&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;代码开发测试完成之后不要急着提交，先跑一遍看看日志是否看得懂。&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;日志是给人看的，只要热爱编程的人才能成为合格程序员，不要匆匆忙忙写完功能测试ok就提交代码，日志也是功能的一部分。要有精益求精的工匠精神！&lt;/p&gt;\n&lt;div class=&quot;anchor-list&quot;&gt; &lt;a name=&quot;parent_1&quot; class=&quot;lemma-anchor para-title&quot;&gt;&lt;/a&gt;&lt;/div&gt; &lt;strong style=&quot;display:block;font-size:25px;padding-bottom:8px&quot;&gt;=============GITHUB地址==============&lt;/strong&gt;\n&lt;p&gt;所有的代码细节都在已经上了github了，地址 &lt;a href=&quot;https://github.com/xwjie/PLMCodeTemplate&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;xwjie/PLMCodeTemplate&lt;/a&gt;，欢迎加星。有问题欢迎提出。&lt;/p&gt;\n&lt;p&gt;觉得有用请点赞加关注，加星，fork，：）&lt;/p&gt;";
// 为html反转码
article_content = article_content.replace(/\&lt\;/g, "<").replace(/\&gt\;/g, ">").replace(/\&amp\;/g, "&").replace(/\&quot\;/g, '"').replace(/\&apos\;/g, "'");
// 递归遍历dom，处理图片懒加载
function dfs(root) {
	var nodes = Array.prototype.slice.call(root.children);
	if (nodes.length) {
		nodes.forEach(function (node) {
			if(node.tagName == 'IMG') {
				var src = node.src;
				node.setAttribute('data-original', src);
				node.setAttribute('class', 'lazyload');
				node.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC';
			}
			dfs(node);
		});
	}
}
// 创建手记内容dom节点
var articleEl = document.createElement("div");
articleEl.innerHTML = article_content;
// 遍历手记dom树
dfs(articleEl);
</script>

<link rel="stylesheet" href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/saved_resource" type="text/css">
<script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/seajs-text.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/common.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/jquery.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/string.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/userinfo.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/cart.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/cookie.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/suggest.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/store.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/json.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/im.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/details.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/moco.min.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/socket.io.min.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/prettify.js.下载"></script><link charset="utf-8" rel="stylesheet" href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/prettify.css"><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/jquery.lazyload.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/ueditor.parse.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/layer.min.js.下载"></script><link charset="utf-8" rel="stylesheet" href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/layer.css"><link charset="utf-8" rel="stylesheet" href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/ueditor.css"><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/addCopy.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/course_tipoff.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/discoverycount.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/praise.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/common.js(1).下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/verify-code.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/mo.min.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/juicer.min.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/jquery.qrcode.min.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/limitinput.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/publish.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/detail.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/forward.js.下载"></script><script charset="utf-8" async="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/detail_forward.js.下载"></script><script src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/share.js.下载"></script><link rel="stylesheet" href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/share_style0_16.css"><link id="syntaxhighlighter_css" rel="stylesheet" type="text/css" href="./程序员你为什么这么累？ - 日志规范_慕课手记_files/shCoreDefault.css"><script id="syntaxhighlighter_js" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/shCore.js.下载" type="text/javascript" defer="defer"></script><style id="chartsContainerHeight">
.edui-chart-container { height:500px}</style><style id="list">
body ol,body ul{margin:0;padding:0;}body .list-paddingleft-1{padding-left:0}
body .list-paddingleft-2{padding-left:20px}
body .list-paddingleft-3{padding-left:40px}</style></head>

<body>
    

<div id="header" class="article-header">
    <div class="page-container" id="nav">
        
        <button type="button" class="navbar-toggle visible-xs-block js-show-menu">
            <i class="icon-menu"></i>
        </button>
        <ul class="nav-item">
                        <li class="set-btn visible-xs-block js-header-avator"><a href="https://www.imooc.com/u/6744283" target="_self"><img width="40" height="40" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5333a2b70001a5a802000200-100-100.jpg"></a></li>
                        <li>
                 <a href="https://www.imooc.com/" target="_self" title="首页">慕课网首页</a>
            </li>
            <li>
                <a href="https://www.imooc.com/course/list" target="_self">免费课程</a>
            </li>           
            <li><a href="https://class.imooc.com/" class="program-nav " target="_self">职业路径</a></li>
            <li>
                <a href="https://coding.imooc.com/" target="_self">实战</a>
            </li>
            <li><a href="https://www.imooc.com/wenda" target="_self">猿问</a></li>
            <li><a href="https://www.imooc.com/article" class="active" target="_self">手记</a></li>
            <li><a href="https://job.imooc.com/" target="_self">找工作<i class="icn-new"></i></a></li>
                                            <li class="visible-xs-block"><a href="https://www.imooc.com/user/setprofile" target="_self">我的设置</a></li>
                <li class="visible-xs-block"><a href="https://www.imooc.com/passport/user/logout?referer=//www.imooc.com" target="_self">退出</a></li>
            
        </ul>
                <div id="login-area">
            <ul class="clearfix logined">
                <li class="app-load" id="js-app-load">
                    <a href="https://www.imooc.com/mobile/app" target="_blank">下载APP</a>
                    <div class="app-load-box clearfix js-load-box">
                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/appload.png" class="l">
                        <div class="r">
                            <p>扫描下载慕课网APP</p>
                            <a href="https://itunes.apple.com/cn/app/mu-ke-wang/id722179140?mt=8"><i class="icon-apple"></i>App Store下载</a>
                            <a href="https://www.imooc.com/mobile/mukewang.apk"><i class="icon-android"></i>Android下载</a>
                        </div>
                    </div>
                </li>
                
                <li class="shop-cart" id="shop-cart">
                    <a href="https://order.imooc.com/pay/cart" class="shop-cart-icon" target="_blank">
                        <span class="icon-shopping-cart js-endcart"></span><span>购物车</span><span class="shopping_icon js-cart-num" data-ordernum="0" data-cartnum="0" style="display: none">0</span>
                    </a>
                    <div class="my-cart" id="js-my-cart"><div class="cart-title-box clearfix">                                        <h2 class="l">我的购物车</h2>                                        <h5 class="r">已加入<span class="js-incart-num">0</span>门课程</h5>                                    </div>                                    <div class="cart-wrap">                                        <div class="clear-cart">                                            <span class="cartIcon icon-shopping-cart"></span>                                            <h3>购物车里空空如也</h3>                                            <div class="text">快去这里选购你中意的课程</div>                                            <p><a class="go-link" href="https://coding.imooc.com/" target="_blank">实战课程</a></p>                                            <p><a class="go-link" href="https://class.imooc.com/" target="_blank">职业路径</a></p>                                        </div>                                    </div>                                    <div class="more-box clearfix">                                        <div class="l show-box">                                            <span class="text"><a href="https://order.imooc.com/myorder" target="_blank">我的订单中心</a></span>                                        </div>                                        <a href="https://order.imooc.com/pay/cart" target="_blank" class="r moco-btn moco-btn-red go-cart">去购物车</a>                                    </div></div>
                </li>
                
                <li class="remind_warp">
                    <i class="msg_remind" style="display: none;"></i>
                    <a target="_blank" href="https://www.imooc.com/u/6744283/notices">
                        <i class="icon-notifi"></i>
                        <!-- <span class="msg_icon" style="display: none;"></span> -->
                    </a>
                </li>
               
                <li class="set_btn user-card-box" id="header-user-card">
                    <a id="header-avator" class="user-card-item js-header-avator" action-type="my_menu" href="https://www.imooc.com/u/6744283" target="_self">
                        <img width="40" height="40" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5333a2b70001a5a802000200-100-100.jpg">
                        <i class="myspace_remind" style="display: none;"></i>
                        <span style="display: none;">动态提醒</span>
                    </a>
                    <div class="g-user-card"><div class="card-inner">                        <div class="card-top clearfix">                            <a href="https://www.imooc.com/u/6744283" class="l"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5333a2b70001a5a802000200-100-100.jpg" alt="慕姐1507336"></a>                            <div class="card-top-right-box l">                                <a href="https://www.imooc.com/u/6744283"><span class="name text-ellipsis">慕姐1507336</span></a>                                <div class="meta">                                    <a href="https://www.imooc.com/u/6744283/experience">经验<b id="js-user-mp">940</b></a>                                    <a href="https://www.imooc.com/u/6744283/credit">积分<b id="js-user-credit">0</b></a>                                </div>                            </div>                        </div>                        <div class="user-center-box">                            <ul class="clearfix">                                <li class="l"><a href="https://www.imooc.com/u/6744283/courses" target="_blank"><span class="user-center-icon icon-tick"></span>我的课程</a></li>                                <li class="l">                                    <a href="https://order.imooc.com/myorder" target="_blank"><span class="user-center-icon icon-receipt"></span>订单中心</a>                                                                    </li>                                <li class="l"><a href="https://www.imooc.com/mall/index" target="_blank"><span class="user-center-icon icon-score_shop"></span>积分商城</a></li>                                <li class="l"><a href="https://www.imooc.com/user/setbindsns" target="_blank"><span class="user-center-icon icon-set"></span>个人设置</a></li>                            </ul>                        </div><div class="card-history">                            <span class="history-item">                                <span class="tit text-ellipsis">ajax跨域完全讲解</span>                                <span class="media-name text-ellipsis">5-7 跨越解决方向</span>                                <i class="icon-clock"></i>                                <a href="https://www.imooc.com/video/16583" class="continue" title="ajax跨域完全讲解
5-7  跨越解决方向">继续</a>                            </span>                    </div><div class="card-sets clearfix"><a href="https://www.imooc.com/passport/user/logout?referer=//www.imooc.com" class="l">安全退出</a></div>                    </div></div>
                </li>
            </ul>
        </div>
                
    </div>
</div>
<div id="sub-header">
            <div class="sub-container" id="sub-nav">
            <a class="article-logo" href="https://www.imooc.com/article"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/article-logo.png" alt=""></a>
            <div class="operate-area clearfix">
                <span>
                    <a href="https://www.imooc.com/article/publish" target="_blank" class="btn btn-blue btn-article">写文章</a>
                </span>
                <span>
                    <a href="https://www.imooc.com/discovery" target="_blank" class="btn btn-discovery">动态圈</a>
                    <a class="count hide">0</a>
                </span>
            </div>
            <div class="search-warp clearfix" style="min-width: 32px;">
                

                <div class="search-area" data-search="top-banner">
                    <input class="search-input" data-suggest-trigger="suggest-trigger" placeholder="搜索感兴趣的知识和文章" type="text" autocomplete="off">
                    <input type="hidden" class="btn_search" data-search-btn="search-btn">
                    <ul class="search-area-result" data-suggest-result="suggest-result">
                    </ul>
                </div>
                <div class="showhide-search" data-show="no"><i class="icon-search"></i></div>
            </div>
            
        </div>
    </div>
<div class="bindHintBox js-bindHintBox hide">
    <div class="pr">
        为了账号安全，请及时绑定邮箱和手机<a href="https://www.imooc.com/user/setbindsns" class="ml20 color-red" target="_blank">立即绑定</a>
        <button class="closeBindHint js-closeBindHint" type="button"></button>
        <div class="arrow"> </div>
    </div>
</div>


<div id="main">

<div class="main_con clearfix">
	<!-- 分享&收藏 -->
	<div class="active-box js-active-fixed">
		<div class="share-box">
			<div class="small-share">
				<ul class="share-wrap">
					<li class="weichat-posi">
						<!-- 推荐 --> 
						<div class="praise-box">
														<button id="js-praise-left"><span class="imv2-thumb_up"></span></button>
																						<span class="praise-num">7</span>
													</div>
						<!-- 推荐end -->



						<div class="icon-warp">
						  <div class="follow-warp">
							<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;pl&#39;])" data-track="pl-1-1" href="https://www.imooc.com/article/28121#comment" class="icon-nav imv2-chat_bubble" title="评论"></a>  
							 							 	<span class="comment-num">2</span>
							 						  </div>
						</div>
						<div class="icon-warp">
							 								<div class="follow-warp">
									<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;sc&#39;])" data-track="sc-1-1" data-id="28121" href="javascript:" class="js-follow dc-follow  icon-nav icon-star2 " title="收藏"></a>
																			<span>8</span>
																	</div>
													</div>    
						
						<p class="line"></p>


						<div class="bdsharebuttonbox weichat-style bdshare-button-style0-16" data-bd-bind="1540457622726">
							<div class="icon-warp2">
								<a class="js-forward-btn imv2-forward icon-nav" href="https://www.imooc.com/article/28121#">
								</a>
								<!-- 只在第一次访问显示 -->
															</div>
							<div class="icon-warp2">
								<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;wx&#39;])" data-track="letfshare-1-1" href="https://www.imooc.com/article/28121#" class="bds_weixin icon-nav icon-share-weichat share-icon" data-cmd="weixin" title="分享到微信"></a>
							</div>
							<div class="icon-warp2">
								<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;wb&#39;])" data-track="letfshare-1-2" href="https://www.imooc.com/article/28121#" class="bds_tsina icon-nav icon-share-weibo share-icon" data-cmd="tsina" title="分享到新浪微博"></a>
							</div>
							<div class="icon-warp2">
								<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;qq&#39;])" data-track="letfshare-1-3" href="https://www.imooc.com/article/28121#" class="bds_qzone icon-nav icon-share-qq share-icon" data-cmd="qzone" title="分享到QQ空间"></a>    
							</div>                               
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- 分享&收藏 end -->
	<div class="left_essay l">
		<div class="part_essay js-part_essay">
							<div class="originalImg"></div>
						<!-- 面包屑 -->
			<div class="detail-path">
				<a class="imooc" target="_blank" href="https://www.imooc.com/"><i class="imv2-imooc"></i></a>
				<a href="https://www.imooc.com/article" target="_blank">手记</a>  /<a href="https://www.imooc.com/article/be" target="_blank" class="js-column">后端开发</a>
			</div>
			<!-- 面包屑end -->       
			<div class="detail-title-wrap">
				<h1 class="detail-title">
					<span class="d-t js-title">程序员你为什么这么累？ - 日志规范</span>
				</h1>
				<div class="dc-profile clearfix">
					<div class="l">
						<span class="spacer">2018.05.01 09:31</span>
						<span class="spacer spacer-2">972浏览</span>
					</div>
					<div class="r path-right-box">
						<div class="rinfo l">
																																			<a href="javascript:void(0);" data-id="28121" data-type="9" data-uid="2674286" class="dc-sns js-tip-off tipoff" data-src="/article/28121"><i class="imv2-error_c"></i>举报</a>
														
							
						</div> 
					</div>	
				</div>
			</div> 

			 <!-- 手记详情 -->
			<div class="detail-content-wrap">  
				<div class="detail-content js-lookimg">
					
					<div><p><strong>导读：<a href="http://www.imooc.com/article/27569" target="_blank" rel="nofollow">程序员你为什么这么累？</a></strong></p>
<ol>
<li><a href="https://www.imooc.com/article/27664" target="_blank" rel="nofollow">接口定义规范</a></li>
<li><a href="http://www.imooc.com/article/27765" target="_blank" rel="nofollow">controller规范</a> </li>
<li><strong>日志规范</strong></li>
<li>异常处理规范 </li>
<li>国际化和参数校验规范 </li>
<li>工具类规范 </li>
<li>函数编写建议</li>
<li>配置建议</li>
</ol>
<p>开发中日志这个问题，每个公司都强调，也制定了一大堆规范，但根据实际情况看，效果不是很明显，主要是这个东西不好测试和考核，没有日志功能一样跑啊。</p>
<p>但编程活久见，开发久了，总会遇到“这个问题生产环境上能重现，但是没有日志，业务很复杂，不知道哪一步出错了？” 这个时候，怎么办？ 还能怎么办，发个版本，就是把所有地方加上日志，没有任何新功能，然后在让用户重现一遍，拿下日志来看，哦，原来是这个问题。</p>
<p><strong>有没有很熟悉的感觉？</strong></p>
<p>还有一种情况，我们系统有3*5=15个节点，出了问题找日志真是痛苦，一个一个机器翻，N分钟后终于找到了，找到了后发现好多相似日志，一个一个排查；日志有了，发现逻辑很复杂，不知道走到那个分支，只能根据逻辑分析，半天过去了，终于找到了原因。。。一个问题定位就过去了2个小时，变更时间过去了一半。。。</p>
<strong style="display:block;font-size:22px;margin:22px 0 10px">日志要求</strong>
<p>所以我对日志的最少有以下2点要求：</p>
<p>1 能找到那个机器</p>
<p>2 能找到用户做了什么</p>
<strong style="display:block;font-size:22px;margin:22px 0 10px">配置nginx</strong>
<p>针对第一点，我修改了一下nginx的配置文件，让返回头里面返回是那个机器处理的。</p>
<p>nginx的基本配置，大家查阅一下资料就知道。简单配置如下（生产环境比这个完善）</p>
<p><img title="程序员你为什么这么累？-日志规范_" 图片1="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5ae7c12b0001059e04160325.jpg" alt="nginx配置" data-original="https://img.mukewang.com/5ae7c12b0001059e04160325.jpg" class="" style="cursor: pointer; display: block;"></p>
<p>效果如图，返回了处理的节点：</p>
<p><img title="程序员你为什么这么累？-日志规范_" 图片2="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5ae7c154000120fe04690263.jpg" alt="效果图" data-original="https://img.mukewang.com/5ae7c154000120fe04690263.jpg" class="" style="cursor: pointer; display: block;"></p>
<p>第二点，要知道用户做了什么。用户信息是很重要的一个信息，能帮助海量日志里面能快速找到目标日志。一开始要求开发人员打印的时候带上用户，但是发现这个落地不容易，开发人员打印日志都经常忘记，更加不用说日志上加上用户信息，我也不可能天天看代码。所以找了一下log4j的配置，果然log4j有个叫MDC(Mapped Diagnostic Context)的类（技术上使用了ThreadLocal实现，重点技术）。具体使用方法请自行查询。具体使用如下：</p>
<strong style="display:block;font-size:22px;margin:22px 0 10px">UserFilter</strong>
<p>filter中得到用户信息，并放入MDC，记住filter后要清理掉（因为tomcat线程池线程重用的原因）。</p>
<pre class="prettyprint"><code class="language-java"><span class="com">/**
 * 用户信息相关的filter
 * 
 * @author 晓风轻 https://xwjie.github.io/PLMCodeTemplate/
 *
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">UserFilter</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Filter</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> init</span><span class="pun">(</span><span class="typ">FilterConfig</span><span class="pln"> filterConfig</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ServletException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> doFilter</span><span class="pun">(</span><span class="typ">ServletRequest</span><span class="pln"> request</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ServletResponse</span><span class="pln"> response</span><span class="pun">,</span><span class="pln">
      </span><span class="typ">FilterChain</span><span class="pln"> chain</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">IOException</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ServletException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">// 得到用户个人相关的信息（登陆的用户，用户的语言）</span><span class="pln">
    fillUserInfo</span><span class="pun">((</span><span class="typ">HttpServletRequest</span><span class="pun">)</span><span class="pln"> request</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      chain</span><span class="pun">.</span><span class="pln">doFilter</span><span class="pun">(</span><span class="pln">request</span><span class="pun">,</span><span class="pln"> response</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">finally</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="com">// 由于tomcat线程重用，记得清空</span><span class="pln">
      clearAllUserInfo</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> clearAllUserInfo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">UserUtil</span><span class="pun">.</span><span class="pln">clearAllUserInfo</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> fillUserInfo</span><span class="pun">(</span><span class="typ">HttpServletRequest</span><span class="pln"> request</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// 用户信息</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> user </span><span class="pun">=</span><span class="pln"> getUserFromSession</span><span class="pun">(</span><span class="pln">request</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">user </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="typ">UserUtil</span><span class="pun">.</span><span class="pln">setUser</span><span class="pun">(</span><span class="pln">user</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// 语言信息</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> locale </span><span class="pun">=</span><span class="pln"> getLocaleFromCookies</span><span class="pun">(</span><span class="pln">request</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// 放入到threadlocal，同一个线程任何地方都可以拿出来</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">locale </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="typ">UserUtil</span><span class="pun">.</span><span class="pln">setLocale</span><span class="pun">(</span><span class="pln">locale</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getLocaleFromCookies</span><span class="pun">(</span><span class="typ">HttpServletRequest</span><span class="pln"> request</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Cookie</span><span class="pun">[]</span><span class="pln"> cookies </span><span class="pun">=</span><span class="pln"> request</span><span class="pun">.</span><span class="pln">getCookies</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cookies </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> cookies</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">UserUtil</span><span class="pun">.</span><span class="pln">KEY_LANG</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">cookies</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">getName</span><span class="pun">()))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> cookies</span><span class="pun">[</span><span class="pln">i</span><span class="pun">].</span><span class="pln">getValue</span><span class="pun">();</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getUserFromSession</span><span class="pun">(</span><span class="typ">HttpServletRequest</span><span class="pln"> request</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">HttpSession</span><span class="pln"> session </span><span class="pun">=</span><span class="pln"> request</span><span class="pun">.</span><span class="pln">getSession</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">session </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// 从session中获取用户信息放到工具类中</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="typ">String</span><span class="pun">)</span><span class="pln"> session</span><span class="pun">.</span><span class="pln">getAttribute</span><span class="pun">(</span><span class="typ">UserUtil</span><span class="pun">.</span><span class="pln">KEY_USER</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> destroy</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
<strong style="display:block;font-size:22px;margin:22px 0 10px">用户工具类</strong>
<p>用户信息放入MDC：</p>
<pre class="prettyprint"><code class="language-java"><span class="com">/**
 * 用户工具类
 * 
 * @author 晓风轻 https://xwjie.github.io/PLMCodeTemplate/
 *
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">UserUtil</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">ThreadLocal</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> tlUser </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ThreadLocal</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;();</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">ThreadLocal</span><span class="pun">&lt;</span><span class="typ">Locale</span><span class="pun">&gt;</span><span class="pln"> tlLocale </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ThreadLocal</span><span class="pun">&lt;</span><span class="typ">Locale</span><span class="pun">&gt;()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">Locale</span><span class="pln"> initialValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="com">// 语言的默认值</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Locale</span><span class="pun">.</span><span class="pln">CHINESE</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">};</span><span class="pln">
  </span><span class="pun">};</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> KEY_LANG </span><span class="pun">=</span><span class="pln"> </span><span class="str">"lang"</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> KEY_USER </span><span class="pun">=</span><span class="pln"> </span><span class="str">"user"</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setUser</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> userid</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    tlUser</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="pln">userid</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// 把用户信息放到log4j</span><span class="pln">
    MDC</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln">KEY_USER</span><span class="pun">,</span><span class="pln"> userid</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">/**
   * 如果没有登录，返回null
   * 
   * @return
   */</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getUserIfLogin</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> tlUser</span><span class="pun">.</span><span class="pln">get</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">/**
   * 如果没有登录会抛出异常
   * 
   * @return
   */</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getUser</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> user </span><span class="pun">=</span><span class="pln"> tlUser</span><span class="pun">.</span><span class="pln">get</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">user </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">UnloginException</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> user</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setLocale</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> locale</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    setLocale</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Locale</span><span class="pun">(</span><span class="pln">locale</span><span class="pun">));</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setLocale</span><span class="pun">(</span><span class="typ">Locale</span><span class="pln"> locale</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    tlLocale</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="pln">locale</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Locale</span><span class="pln"> getLocale</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> tlLocale</span><span class="pun">.</span><span class="pln">get</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> clearAllUserInfo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    tlUser</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">();</span><span class="pln">
    tlLocale</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">();</span><span class="pln">

    MDC</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">KEY_USER</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
<strong style="display:block;font-size:22px;margin:22px 0 10px">log4j配置</strong>
<p>增加用户信息变量，%X{user}</p>
<pre class="prettyprint"><code class="language-xml"><span class="com">&lt;!-- Appenders --&gt;</span><span class="pln">
</span><span class="tag">&lt;appender</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"console"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.apache.log4j.ConsoleAppender"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;param</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"Target"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"System.out"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
  </span><span class="tag">&lt;layout</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.apache.log4j.PatternLayout"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;param</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"ConversionPattern"</span><span class="pln">
      </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"[%t]%-d{MM-dd HH:mm:ss,SSS} %-5p:%X{user} - %c - %m%n"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
  </span><span class="tag">&lt;/layout&gt;</span><span class="pln">
</span><span class="tag">&lt;/appender&gt;</span></code></pre>
<strong style="display:block;font-size:22px;margin:22px 0 10px">日志要求</strong>
<p>我做好上面2步后，对开发人员的日志只有3点要求：</p>
<ul>
<li>修改（包括新增）操作必须打印日志</li>
</ul>
<p>大部分问题都是修改导致的。数据修改必须有据可查。</p>
<ul>
<li>条件分支必须打印条件值，重要参数必须打印</li>
</ul>
<p>尤其是分支条件的参数，打印后就不用分析和猜测走那个分支了，很重要！如下面代码里面的userType，一定要打印值，因为他<strong>决定了代码走那个分支</strong>。</p>
<p><img title="程序员你为什么这么累？-日志规范_" 图片3="" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5ae7c1770001f31407000463.jpg" alt="log" data-original="https://img.mukewang.com/5ae7c1770001f31407000463.jpg" class="" style="cursor: pointer; display: block;"></p>
<ul>
<li>数据量大的时候需要打印数据量</li>
</ul>
<p>前后打印日志和最后的数据量，主要用于分析性能，能从日志中知道查询了多少数据用了多久。这点是建议。自己视情况而决定是否打印，我一般建议打印。</p>
<strong style="display:block;font-size:22px;margin:22px 0 10px">日志效果图</strong>
<p>加上 我的编码习惯 - Controller规范 这篇文章的AOP，最后的日志如下：</p>
<p><img title="程序员你为什么这么累？-日志规范_" 图片4="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" alt="log" data-original="https://img.mukewang.com/5ae7c1a80001d61d07200115.jpg" class="lazyload" style="cursor: pointer;"></p>
<p>其实日志的级别我到不是很关注，还没有到关注这步到时候。开发组长需要做好后勤工作（前面2步），然后制定简单规则，规则太多太能落实了。</p>
<strong style="display:block;font-size:22px;margin:22px 0 10px">新手建议</strong>
<p>日志这个东西，更多是靠自觉，项目组这么多人，我也不可能一个一个给大家看代码，然后叫你加日志。我分析了一下，为什么有些人没有打印日志的习惯，说了多次都改不过来。我建议大家养成下面的习惯，这样你的日志就会改善多了！</p>
<ul>
<li>不要依赖debug，多依赖日志。</li>
</ul>
<p>别人面对对象编程，你面对debug编程。有些人无论什么语言，最后都变成了面对debug编程。哈哈。这个习惯非常非常不好！debug会让你写代码的时候偷懒不打日志，而且很浪费时间。改掉这个恶习。</p>
<ul>
<li>代码开发测试完成之后不要急着提交，先跑一遍看看日志是否看得懂。</li>
</ul>
<p>日志是给人看的，只要热爱编程的人才能成为合格程序员，不要匆匆忙忙写完功能测试ok就提交代码，日志也是功能的一部分。要有精益求精的工匠精神！</p>
<div class="anchor-list"> <a name="parent_1" class="lemma-anchor para-title"></a></div> <strong style="display:block;font-size:25px;padding-bottom:8px">=============GITHUB地址==============</strong>
<p>所有的代码细节都在已经上了github了，地址 <a href="https://github.com/xwjie/PLMCodeTemplate" target="_blank" rel="nofollow">xwjie/PLMCodeTemplate</a>，欢迎加星。有问题欢迎提出。</p>
<p>觉得有用请点赞加关注，加星，fork，：）</p></div>
					<div>
						<div class=""></div>
						<div class="showMore"><span>点击查看更多内容</span></div>
					</div>
				</div>
				<!-- 标签 -->
												<div class="cat-box">
					<div class="cat-wrap clearfix">
																		<a class="cat l" href="https://www.imooc.com/article/tag/3" target="_blank">JAVA</a>
																		<a class="cat l" href="https://www.imooc.com/article/tag/62" target="_blank">SpringBoot</a>
											</div>
											<div class="original-warp">
							<p class="original">本文原创发布于慕课网 ，转载请注明出处，谢谢合作</p>    
						</div>                    
									</div>
								<!-- 推荐 --> 
				<div class="praise-box">
										<button id="js-praise"><span class="imv2-thumb_up"></span><div style="position: absolute; top: 50%; left: 50%; width: 230px; height: 230px; margin-left: -115px; margin-top: -115px; opacity: 0.6; display: none; transform: rotate(0deg) translate(0px, 0px);"><svg style="position: absolute; width: 100%; height: 100%;"><ellipse cy="0" cx="0" ry="15" rx="15" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="#F9B552" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="15" rx="15" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="#F9B552" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="15" rx="15" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="#F9B552" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="15" rx="15" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="#F9B552" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="15" rx="15" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="#F9B552" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="15" rx="15" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="#F9B552" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse></svg></div><div style="position: absolute; top: 50%; left: 50%; width: 180px; height: 180px; margin-left: -90px; margin-top: -90px; opacity: 0.6; display: none; transform: translate(0px, 0px);"><svg style="position: absolute; width: 100%; height: 100%;"><ellipse cy="90" cx="90" ry="0" rx="0" transform="rotate(0,90,90)" fill-opacity="transparent" stroke-linecap="" stroke-dashoffset="" fill="transparent" stroke-dasharray="" stroke-opacity="1" stroke-width="20" stroke="#F9B552"></ellipse></svg></div></button>
										<div class="num-person"><em class="num">7</em>人推荐</div>
					<div class="praise-share icon-drop_up hide">
						<div class="praise-share-box">
							<p>若觉得本文不错，就分享一下吧！</p>
							<div class="share-content bdsharebuttonbox bdshare-button-style0-16" data-bd-bind="1540457622726">
								<div class="icon-warp">
									<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_top&#39;, &#39;share&#39;, &#39;wx&#39;])" data-track="topshare-1-1" href="https://www.imooc.com/article/28121#" class="bds_weixin icon-nav imv2-weixin_c share-icon" data-cmd="weixin" title="分享到微信"></a>
								</div>
								<div class="icon-warp">
									<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_top&#39;, &#39;share&#39;, &#39;wb&#39;])" data-track="topshare-1-2" href="https://www.imooc.com/article/28121#" class="bds_tsina icon-nav imv2-weibo_c share-icon" data-cmd="tsina" title="分享到新浪微博"></a>
								</div>
								<div class="icon-warp">
									<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_top&#39;, &#39;share&#39;, &#39;qq&#39;])" data-track="topshare-1-3" href="https://www.imooc.com/article/28121#" class="bds_qzone icon-nav imv2-qq_c share-icon" data-cmd="qzone" title="分享到QQ空间"></a>    
								</div> 
							</div>
						</div>	
					</div>
				</div>
				<!-- 推荐end -->
			</div>

			
		</div>	
		<div class="opus-wrap clearfix">
			<div class="detail-left">
				<div class="df-title" id="all_comments"><span class="comment-num"><i>2</i></span> 评论</div>
				<div class="detail-feedback-wrap">
					<!-- 评论框 -->
					<div class="df-ipt-wrap clearfix" id="comment">
					
						<div class="feeds-author l">
							
							评论
							
						</div>
						<p class="fadeInput l js-showcommentModal">共同学习，写下你的评论</p>
					
					</div>
					<!-- 评论框end -->
					<!-- 评论 -->
					<div id="js-feedback-list-wrap" class="feedback-list js-feedback-lookimg">
						
					<div id="js-feedback-list"><div class="comment-box clearfix"><div class="comment clearfix"><div class="feed-author l"><a href="https://www.imooc.com/u/1390577/articles"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/545862fe00017c2602200220-100-100.jpg" width="48"><span class="com-floor">2楼</span></a></div><div class="feed-list-content"><a class="nick" href="https://www.imooc.com/u/1390577/articles" target="_blank">xanthuim</a><p></p><p>频繁的打印日志，就会出现日志比代码还多。。。不建议动不动就日志，除非那些关键地方打印下即可。</p><p></p><div class="comment-footer clearfix"><span class="agree-with l" data-commentid="46001" data-uid="1390577" data-username="xanthuim"><b class="imv2-thumb_up" title="赞同"></b><em>0</em></span><span class="reply-btn" data-commentid="46001" data-uid="1390577" data-username="xanthuim">回复</span><span class="report-btn js-tip-off tipoff " data-id="46001" data-uid="1390577" data-type="10" data-src="/article/28121">举报</span><span class="feed-list-times"> 2018.09.21</span></div></div></div><div class="reply-boxhide"></div><div class="release-reply clearfix"><a href="https://www.imooc.com/u/6744283/articles" class="user-head"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5333a2b70001a5a802000200-100-100.jpg" alt="慕姐1507336"></a><div class="replay-con l"><div class="textarea-wrap"><textarea placeholder="写下你的回复..."></textarea></div><p class="errtip"></p><div class="reply-ctrl clearfix"><div class="captcha-verify-box js-reply-verify-box hide"></div><div class="btn-wrap"><div class="cancel-btn">取消</div><div data-comment-uid="1390577" class="release-reply-btn">回复</div></div></div></div></div></div><div class="comment-box clearfix"><div class="comment clearfix"><div class="feed-author l"><a href="https://www.imooc.com/u/4019140/articles"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5b71542e000141d219201080-100-100.jpg" width="48"><span class="com-floor">1楼</span></a></div><div class="feed-list-content"><a class="nick" href="https://www.imooc.com/u/4019140/articles" target="_blank">慕粉4019140</a><p></p><p>不明觉厉</p><p></p><div class="comment-footer clearfix"><span class="agree-with l" data-commentid="43084" data-uid="4019140" data-username="慕粉4019140"><b class="imv2-thumb_up" title="赞同"></b><em>1</em></span><span class="reply-btn" data-commentid="43084" data-uid="4019140" data-username="慕粉4019140">回复</span><span class="report-btn js-tip-off tipoff " data-id="43084" data-uid="4019140" data-type="10" data-src="/article/28121">举报</span><span class="feed-list-times"> 2018.05.01</span></div></div></div><div class="reply-boxhide"></div><div class="release-reply clearfix"><a href="https://www.imooc.com/u/6744283/articles" class="user-head"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5333a2b70001a5a802000200-100-100.jpg" alt="慕姐1507336"></a><div class="replay-con l"><div class="textarea-wrap"><textarea placeholder="写下你的回复..."></textarea></div><p class="errtip"></p><div class="reply-ctrl clearfix"><div class="captcha-verify-box js-reply-verify-box hide"></div><div class="btn-wrap"><div class="cancel-btn">取消</div><div data-comment-uid="4019140" class="release-reply-btn">回复</div></div></div></div></div></div></div></div>
					<!-- 分页页码  -->
					<!-- <div class="qa-comment-page hide"></div> -->

					<div class="qa-comment-page hide" style="display: none;">
						<div class="moreBtn js-more" data-page="2">展开查看更多评论</div>
					</div>
				</div>
			</div>
		</div>
		<div class="article_wrap">
			<div class="line_con">
				<p class="line"></p>
				<p class="line_text">相关文章推荐</p>
			</div>
			<div class="article-wrapper">
				<div class="articleCon js-articleCon js-usercard-box">
					
				<div class="article clearfix">                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5aeae5a40001b6d010400390-200-200.jpg">                    </div>                    <div class="list-content l">                        <a href="https://www.imooc.com/article/28249" target="_blank" class="title"><p>程序员你为什么这么累？ - 异常处理规范</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>750</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">05.03</div>                        </a></div><a>                    </a></div><a>                </a></div><div class="article clearfix"><a>                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/pic3.jpg">                    </div>                    </a><div class="list-content l"><a>                        </a><a href="https://www.imooc.com/article/29527" target="_blank" class="title"><p>程序员你为什么这么累？ - 配置规范</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>113</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">05.15</div>                        </a></div><a>                    </a></div><a>                </a></div><div class="article clearfix"><a>                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5ae2b10a0001f92408900376-200-200.jpg">                    </div>                    </a><div class="list-content l"><a>                        </a><a href="https://www.imooc.com/article/27765" target="_blank" class="title"><p>程序员你为什么这么累？ - Controller规范</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>2194</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">04.27</div>                        </a></div><a>                    </a></div><a>                </a></div><div class="article clearfix"><a>                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5b22699a0001a25004310304-200-200.jpg">                    </div>                    </a><div class="list-content l"><a>                        </a><a href="https://www.imooc.com/article/36293" target="_blank" class="title"><p>《程序员你为什么这么累？​》晓风轻编码规范电子书打包下载</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>2053</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/76" target="_blank"><span>架构</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">06.14</div>                        </a></div><a>                    </a></div><a>                </a></div><div class="article clearfix"><a>                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5ae096180001642e07900717-200-200.jpg">                    </div>                    </a><div class="list-content l"><a>                        </a><a href="https://www.imooc.com/article/27664" target="_blank" class="title"><p>程序员你为什么这么累？- 接口定义规范</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>998</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">04.25</div>                        </a></div><a>                    </a></div><a>                </a></div><div class="article clearfix"><a>                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/pic14.jpg">                    </div>                    </a><div class="list-content l"><a>                        </a><a href="https://www.imooc.com/article/29038" target="_blank" class="title"><p>程序员你为什么这么累？ - 函数编写建议</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>92</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">05.11</div>                        </a></div><a>                    </a></div><a>                </a></div><div class="article clearfix"><a>                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/pic10.jpg">                    </div>                    </a><div class="list-content l"><a>                        </a><a href="https://www.imooc.com/article/30059" target="_blank" class="title"><p>程序员你为什么这么累？ - 如何应对需求变更</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>278</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">05.19</div>                        </a></div><a>                    </a></div><a>                </a></div><div class="article clearfix"><a>                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5af28c9d000105b404000200-200-200.jpg">                    </div>                    </a><div class="list-content l"><a>                        </a><a href="https://www.imooc.com/article/28575" target="_blank" class="title"><p>程序员你为什么这么累？ - 工具类编写</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>874</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">05.08</div>                        </a></div><a>                    </a></div><a>                </a></div><div class="article clearfix"><a>                    <div class="imgCon l">                        <img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5aed02e100012f7409800649-200-200.jpg">                    </div>                    </a><div class="list-content l"><a>                        </a><a href="https://www.imooc.com/article/28339" target="_blank" class="title"><p>程序员你为什么这么累？ - 参数校验和国际化</p></a>                        <div class="list-bottom clearfix">                            <div class="labels-area l clearfix">                                <div class="browseNum l">                                    <i class="imv2-visibility"></i>                                    <span>54</span>                                </div>                                <div data-fuid="2674286" class="nickName l js-usercard-dialog" data-userid="2674286">晓风轻</div>                                <span class="skill clearfix"><a href="https://www.imooc.com/article/tag/3" target="_blank"><span>JAVA</span></a><a><i class="imv2-dot_samll"></i></a><a href="https://www.imooc.com/article/tag/62" target="_blank"><span>SpringBoot</span></a><a></a></span><a>                        </a></div><a>                            <div class="createTime r">05.05</div>                        </a></div><a>                    </a></div><a>                </a></div></div>
				
				<div class="feed-loading js-feed-loading" data-page="2">
					<i class="imv2-loading"></i><span>正在加载中</span>
				</div>
			</div>
		</div>
	</div>
	<div class="right_recommend r">
				<!-- 作者信息 -->
		<div class="author_info js-author_info clearfix">
			<a href="https://www.imooc.com/u/2674286/articles" class="l img_con" title="晓风轻" target="_blank">
				<img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5adf1c820001910603200320-100-100.jpg">
			</a>
			<div class="text_con l">
				<div class="name_con clearfix">
					<p class="name l">
					 	<a class="nick" href="https://www.imooc.com/u/2674286/articles" title="晓风轻" target="_blank">
						晓风轻
						</a>
					</p>
																	<p class="forward">
							<span class="js-add-follow" data-uid="2674286" data-type="1">关注</span>
							
							<span class="js-already-follow js-has-already" data-uid="2674286" data-type="2" style="display:none;">已关注</span>
						</p>
															</div>
				<div class="job">
					<span class="job-title" title="全栈工程师">全栈工程师</span>
					<span class="job-icon">
												<i class="user-icon teacher" title="慕课网讲师"></i>
																		<i class="user-icon great" title="认证作者"></i>
						       
											</span>
				</div>
				<div class="contribution clearfix">
					<a href="https://www.imooc.com/u/2674286/articles" target="_blank" class="js-article-num l">
						<span>21</span> 篇手记
					</a>
					<a href="https://www.imooc.com/u/2674286/articles" target="_blank" class="js-article-words l">
						贡献 <span>77073</span> 字
					</a>
				</div>
			</div>
		</div>   
		<!-- 作者信息end -->
				<!-- 作者相关文章 -->
				<div class="other_article js-other_article clearfix">
			<div class="title l">作者相关文章</div>
			<div class="more r">
				<a href="https://www.imooc.com/u/2674286/articles" target="_blank">更多<i class="imv2-arrow2_r"></i></a>
			</div>
			<ul class="l">
							<li class="article-item clearfix">
					<i class="imv2-shouji l"></i>
					<a href="https://www.imooc.com/article/28364" class="l" target="_blank">
						什么才是java的基础知识？
					</a>
				</li>
							<li class="article-item clearfix">
					<i class="imv2-shouji l"></i>
					<a href="https://www.imooc.com/article/27569" class="l" target="_blank">
						程序员你为什么这么累？
					</a>
				</li>
							<li class="article-item clearfix">
					<i class="imv2-shouji l"></i>
					<a href="https://www.imooc.com/article/27181" class="l" target="_blank">
						springboot2 webflux 响应式编程学习路径
					</a>
				</li>
							<li class="article-item clearfix">
					<i class="imv2-shouji l"></i>
					<a href="https://www.imooc.com/article/27664" class="l" target="_blank">
						程序员你为什么这么累？- 接口定义规范
					</a>
				</li>
							<li class="article-item clearfix">
					<i class="imv2-shouji l"></i>
					<a href="https://www.imooc.com/article/27765" class="l" target="_blank">
						程序员你为什么这么累？ - Controller规范
					</a>
				</li>
						</ul>
		</div>
				<!-- 作者相关文章end -->
		<!-- 相关课程 -->
		<div class="related_lessons js-related_lessons js-fixed"><div class="title">相关课程</div><ul class="moco-aside-course"><li><div class="aside-course-img"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5ad9e5a80001732c05400300-360-202.jpg"><p class="aside-course-type">实战</p></div><div class="aside-course-content"><a href="https://coding.imooc.com/class/209.html?mc_marking=4655172e1a62839eea65105dbf244230&amp;mc_channel=sjkctjpc" class="aside-course-name" target="_blank">SpringBoot2.0不容错过的新特性 WebFlux响应式编程</a><p class="aside-course-price"><span>￥128</span></p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-grade">中级</p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-people"><i class="imv2-set-sns"></i><span>365</span></p></div></li><li><div class="aside-course-img"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/59eeb022000162bc05400300-360-202.jpg"><p class="aside-course-type">实战</p></div><div class="aside-course-content"><a href="https://coding.imooc.com/class/71.html?mc_marking=4655172e1a62839eea65105dbf244230&amp;mc_channel=sjkctjpc" class="aside-course-name" target="_blank">学习算法思想，修炼编程内功</a><p class="aside-course-price"><span>￥166</span></p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-grade">中级</p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-people"><i class="imv2-set-sns"></i><span>6779</span></p></div></li><li><div class="aside-course-img"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/58f57d200001461105400300-360-202.jpg"><p class="aside-course-type">实战</p></div><div class="aside-course-content"><a href="https://coding.imooc.com/class/96.html?mc_marking=4655172e1a62839eea65105dbf244230&amp;mc_channel=sjkctjpc" class="aside-course-name" target="_blank">从0开始 独立完成企业级Java电商网站开发</a><p class="aside-course-price"><span>￥348</span></p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-grade">中级</p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-people"><i class="imv2-set-sns"></i><span>5898</span></p></div></li><li><div class="aside-course-img"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/5a7d64da0001032d06000338-240-135.jpg"></div><div class="aside-course-content"><a href="https://www.imooc.com/learn/947?mc_marking=4655172e1a62839eea65105dbf244230&amp;mc_channel=sjkctjpc" class="aside-course-name" target="_blank">ajax跨域完全讲解</a><p class="aside-course-grade">中级</p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-people"><i class="imv2-set-sns"></i><span>40759</span></p></div></li><li><div class="aside-course-img"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/57035ff200014b8a06000338-240-135.jpg"></div><div class="aside-course-content"><a href="https://www.imooc.com/learn/85?mc_marking=4655172e1a62839eea65105dbf244230&amp;mc_channel=sjkctjpc" class="aside-course-name" target="_blank">Java入门第一季</a><p class="aside-course-grade">入门</p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-people"><i class="imv2-set-sns"></i><span>892205</span></p></div></li><li><div class="aside-course-img"><img src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/59cb5f4300014a4906000338-228-128.jpg"><p class="aside-course-type">路径</p></div><div class="aside-course-content"><a href="https://class.imooc.com/sc/31?mc_marking=4655172e1a62839eea65105dbf244230&amp;mc_channel=sjkctjpc" class="aside-course-name" target="_blank">Java Web基础入门</a><p class="aside-course-price"><span>￥468</span></p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-grade">4步骤/20门课</p><div class="aside-course-dot"><i class="imv2-dot_samll"></i></div><p class="aside-course-people"><i class="imv2-set-sns"></i><span>716</span></p></div></li></ul></div>
		<!-- 相关课程end -->
	</div>
</div>
<div class="bottom-fixed js-bottom-fixed hide">
	<ul class="bottom-wrap clearfix">
		<!-- 推荐 --> 
		<li class="praise-box l">
						<button id="js-praise-bottom"><span class="imv2-thumb_up"></span></button>
										<span class="praise-num">7</span>
					</li>
		<!-- 推荐end -->
		<li class="icon-warp l">
			<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;pl&#39;])" data-track="pl-1-1" href="https://www.imooc.com/article/28121#comment" class="icon-nav imv2-chat_bubble" title="评论"></a>  
							<span class="comment-num">2</span>
					</li>
		<li class="icon-warp l">
							<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;sc&#39;])" data-track="sc-1-1" data-id="28121" href="javascript:" class="js-follow icon-nav icon-star2 " title="收藏"></a>
				<span>收藏</span>   
					</li>    
		<li class="input l js-showcommentModal">共同学习，写下你的评论</li>
		<li class="icon-warp2 l">
			<a class="js-forward-btn imv2-forward icon-nav2" href="https://www.imooc.com/article/28121#">
			</a>
			<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;wx&#39;])" data-track="letfshare-1-1" href="https://www.imooc.com/article/28121#" class="bds_weixin icon-nav2 icon-share-weichat share-icon" data-cmd="weixin" title="分享到微信"></a>
			<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;wb&#39;])" data-track="letfshare-1-2" href="https://www.imooc.com/article/28121#" class="bds_tsina icon-nav2 icon-share-weibo share-icon" data-cmd="tsina" title="分享到新浪微博"></a>
			<a onclick="_hmt.push([&#39;_trackEvent&#39;, &#39;sjtj_left&#39;, &#39;share&#39;, &#39;qq&#39;])" data-track="letfshare-1-3" href="https://www.imooc.com/article/28121#" class="bds_qzone icon-nav2 icon-share-qq share-icon" data-cmd="qzone" title="分享到QQ空间"></a>                                  
		</li>
	</ul>
</div>




<div class="hide">
	<input type="hidden" data-pic="5ae7c36b0001437307050298" id="js-share-img">
	<input type="hidden" data-pic="//img3.mukewang.com/5adf1c820001910603200320-100-100.jpg" id="js-img-author">
</div>
<div class="r"></div>

</div>



<div id="J_GotoTop" class="elevator">

    <a href="https://www.imooc.com/user/feedback" class="elevator-msg" target="_blank">
        <i class="icon-feedback"></i>
        <span class="">意见反馈</span>
    </a>
    <a href="https://www.imooc.com/help" class="elevator-faq" target="_blank">
        <i class="icon-ques"></i>
        <span class="">帮助中心</span>
    </a>
    <a href="https://www.imooc.com/mobile/app" target="_blank" class="elevator-app">
        <i class="icon-appdownload"></i>
        <span class="">APP下载</span>
        <div class="elevator-app-box"></div>
    </a>
    <a href="javascript:void(0)" class="elevator-weixin" id="js-elevator-weixin">
        <i class="icon-wxgzh"></i>
        <span class="">官方微信</span>
        <div class="elevator-weixin-box"></div>
    </a>
    <a href="javascript:void(0)" class="elevator-top no-goto" style="" id="backTop">
        <i class="icon-up2"></i>
        <span class="">返回顶部</span>
    </a>
</div>



<script type="text/javascript" charset="utf-8" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/ueditor.final.min.js.下载"></script>


<!--script-->
<script type="text/javascript" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/error.js.下载"></script>
<script src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/ssologin.js.下载"></script>
<script type="text/javascript" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/sea.js.下载"></script>
<script type="text/javascript" src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/sea_config.js.下载"></script>
<script type="text/javascript">seajs.use("/static/page/"+OP_CONFIG.module+"/"+OP_CONFIG.page);</script>


<script src="./程序员你为什么这么累？ - 日志规范_慕课手记_files/captcha.min.js.下载"></script>
<script>
	// 处理长篇幅文章部分显示
	var hideArticleInterval, htmlFilterInterval;
	(function() {
		hideArticleInterval = setInterval(function() {
			contentEl = document.querySelector('.detail-content');
			var height = contentEl.offsetHeight;
			if(contentEl && height > 0) {
				clearInterval(hideArticleInterval);
				hideArticleInterval = null;
				if(height > 3000) {
					contentEl.className += ' long-content';
				}
				document.querySelector('.showMore span').addEventListener('click', function() {
					$('.detail-content').removeClass('long-content');
				});
			}
		},5);
		htmlFilterInterval = setInterval(function() {
			var articleBox = document.getElementById('article_content');
			if(window.$ && $.fn.lazyload && articleBox) {
				clearInterval(htmlFilterInterval);
				htmlFilterInterval = null;
				$(articleBox).replaceWith(articleEl);
				$('img.lazyload').lazyload({
					load: function() {
						$(this).removeClass('lazyload');
					}
				});
			}
		},5);
	}());
</script>

<div class="tipoff-block js-tipoff-block"></div>
<div class="tipoff-box js-tipoff-box">
	<div class="tipoff-top-box clearfix">
		<p class="l tipoff-title">举报</p>
		<span class="r tipoff-close-btn icon-close2 js-tipoff-close"></span>
	</div>
	<div class="tipoff-type-box js-tipoff-typebox clearfix">
		<div class="tipoff-loading">
		  	<div class="bounce1"></div>
			<div class="bounce2"></div>
			<div class="bounce3"></div>
		</div>
	</div>
	<div class="tipoff-content">
		<textarea name="tipoff-content" class="tipoff-desc js-tipoff-desc" placeholder="写下举报理由"></textarea>
		<div class="tipoff-text"><span class="js-tipoff-text">0</span>/150</div>
	</div>
	<div class="tipoff-btn-box clearfix">
		<div class="r tipoff-submit-btn js-tipoff-submit" data-tipofftype="">提交</div>
		<div class="r tipoff-cancel-btn js-tipoff-close">取消</div>
	</div>
</div>








<div style="display: none">
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?f0cfcccd7b1393990c78efdeebff3968";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
(function (d) {
window.bd_cpro_rtid="rHT4P1c";
var s = d.createElement("script");s.type = "text/javascript";s.async = true;s.src = location.protocol + "//cpro.baidu.com/cpro/ui/rt.js";
var s0 = d.getElementsByTagName("script")[0];s0.parentNode.insertBefore(s, s0);
})(document);
</script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</div>


<div></div><div style="position: absolute; top: 100px; left: 100px; width: 164px; height: 164px; margin-left: -82px; margin-top: -82px; opacity: 1; display: none; transform: rotate(0deg) translate(0px, 0px);"><svg style="position: absolute; width: 100%; height: 100%;"><ellipse cy="0" cx="0" ry="7" rx="7" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="deeppink" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="7" rx="7" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="deeppink" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="7" rx="7" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="deeppink" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="7" rx="7" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="deeppink" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse><ellipse cy="0" cx="0" ry="7" rx="7" transform="rotate(0,0,0)" fill-opacity="1" stroke-linecap="" stroke-dashoffset="NaN " fill="deeppink" stroke-dasharray="NaN " stroke-opacity="1" stroke-width="0" stroke="transparent" style="opacity: 1; display: none;"></ellipse></svg></div></body></html>